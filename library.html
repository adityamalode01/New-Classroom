<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ðŸ“š Digital Library | Smart Classroom</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
:root{
  --primary:#6366f1;
  --secondary:#22d3ee;
  --accent:#f472b6;
  --dark:#020617;
  --light:#f8fafc;
  --success:#10b981;
  --error:#ef4444;
  --instagram: #E4405F;
  --github: #333333;
  --twitter: #1DA1F2;
  --linkedin: #0A66C2;
}

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Poppins', sans-serif;
}

/* ================= ANIMATED BACKGROUND ================= */
body{
  min-height:100vh;
  background:linear-gradient(180deg, #0a0a2a 0%, #020617 100%);
  color:white;
  overflow-x:hidden;
  position:relative;
}

/* Twinkling Starfield */
.starfield {
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  z-index:-2;
}

.star {
  position:absolute;
  background-color:white;
  border-radius:50%;
  animation:twinkle var(--duration) infinite ease-in-out;
}

.star.small { width:1px; height:1px; }
.star.medium { width:2px; height:2px; }
.star.large { width:3px; height:3px; }

@keyframes twinkle {
  0%, 100% { opacity:0.2; }
  50% { opacity:1; }
}

/* Floating Gradient Orbs */
.gradient-orbs {
  position:fixed;
  width:200vw;
  height:200vh;
  top:-50vh;
  left:-50vw;
  z-index:-1;
  opacity:0.3;
}

.orb {
  position:absolute;
  border-radius:50%;
  filter:blur(60px);
  animation:float 20s infinite linear;
}

.orb-1 {
  width:500px;
  height:500px;
  background:radial-gradient(circle, var(--primary) 0%, transparent 70%);
  top:10%;
  left:10%;
  animation-duration:25s;
}

.orb-2 {
  width:600px;
  height:600px;
  background:radial-gradient(circle, var(--secondary) 0%, transparent 70%);
  top:60%;
  right:10%;
  animation-duration:30s;
  animation-delay:5s;
}

.orb-3 {
  width:400px;
  height:400px;
  background:radial-gradient(circle, var(--accent) 0%, transparent 70%);
  bottom:10%;
  left:20%;
  animation-duration:35s;
  animation-delay:10s;
}

@keyframes float {
  0% { transform:translate(0, 0) rotate(0deg); }
  25% { transform:translate(100px, 50px) rotate(90deg); }
  50% { transform:translate(50px, 100px) rotate(180deg); }
  75% { transform:translate(-50px, 50px) rotate(270deg); }
  100% { transform:translate(0, 0) rotate(360deg); }
}

/* ================= ENHANCED NAVBAR ================= */
.navbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:20px 40px;
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(20px);
  border-bottom:1px solid rgba(255,255,255,0.1);
  position:sticky;
  top:0;
  z-index:100;
}

.navbar .logo{
  display:flex;
  align-items:center;
  gap:12px;
  font-size:1.5rem;
  font-weight:600;
  color:white;
}

.logo-icon{
  font-size:2rem;
  color:var(--secondary);
}

.navbar ul{
  list-style:none;
  display:flex;
  gap:25px;
}

.navbar ul a{
  color:rgba(255,255,255,0.9);
  text-decoration:none;
  font-weight:500;
  padding:10px 15px;
  border-radius:12px;
  transition:all 0.3s ease;
  position:relative;
  overflow:hidden;
}

.navbar ul a:hover{
  color:#ffeb3b;
  background:rgba(255,255,255,0.1);
  transform:translateY(-2px);
}

.navbar ul a.active{
  background:linear-gradient(135deg, var(--primary), var(--secondary));
  color:white;
}

/* ================= SOCIAL MEDIA BAR ================= */
.social-bar {
  position:fixed;
  right:20px;
  top:50%;
  transform:translateY(-50%);
  display:flex;
  flex-direction:column;
  gap:15px;
  z-index:99;
}

.social-btn {
  width:50px;
  height:50px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:1.3rem;
  color:white;
  transition:all 0.3s ease;
  position:relative;
  overflow:hidden;
  border:none;
  cursor:pointer;
  text-decoration:none;
  box-shadow:0 5px 15px rgba(0,0,0,0.3);
}

.social-btn:hover {
  transform:translateY(-5px) scale(1.1);
  box-shadow:0 10px 25px rgba(0,0,0,0.4);
}

.social-btn .tooltip {
  position:absolute;
  right:60px;
  top:50%;
  transform:translateY(-50%);
  background:rgba(0,0,0,0.8);
  color:white;
  padding:6px 12px;
  border-radius:6px;
  font-size:0.8rem;
  white-space:nowrap;
  opacity:0;
  transition:opacity 0.3s ease;
  pointer-events:none;
}

.social-btn:hover .tooltip {
  opacity:1;
}

/* Social Media Colors */
.instagram-btn {
  background:linear-gradient(45deg, #405DE6, #E4405F, #FD1D1D, #F77737);
}

.github-btn {
  background:var(--github);
}

.twitter-btn {
  background:var(--twitter);
}

.linkedin-btn {
  background:var(--linkedin);
}

.email-btn {
  background:linear-gradient(45deg, #EA4335, #34A853);
}

.whatsapp-btn {
  background:linear-gradient(45deg, #25D366, #128C7E);
}

/* ================= PAGE SECTION ================= */
.section-page{
  max-width:1300px;
  margin:60px auto;
  background:rgba(255,255,255,0.09);
  backdrop-filter:blur(26px) saturate(180%);
  padding:50px 40px;
  border-radius:30px;
  border:1px solid rgba(255,255,255,0.15);
  box-shadow:
    0 40px 150px rgba(0,0,0,0.75),
    inset 0 1px 0 rgba(255,255,255,0.1);
  animation:enter 0.8s ease;
}

.section-page::before{
  content:'';
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:4px;
  background:linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
  border-radius:30px 30px 0 0;
}

@keyframes enter{
  from{opacity:0; transform:translateY(30px);}
  to{opacity:1; transform:translateY(0);}
}

.section-page h2{
  text-align:center;
  font-size:2.8rem;
  margin-bottom:40px;
  background:linear-gradient(135deg, var(--primary), var(--secondary));
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
}

/* ================= FILTER FORM ================= */
.filter-form{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:20px;
  margin-bottom:40px;
  padding:25px;
  background:rgba(255,255,255,0.05);
  border-radius:20px;
  border:1px solid rgba(255,255,255,0.1);
}

.filter-form select{
  padding:15px;
  border-radius:15px;
  border:1px solid rgba(255,255,255,0.2);
  background:rgba(255,255,255,0.07);
  color:white;
  font-size:1rem;
  transition:all 0.3s ease;
}

.filter-form select option{
  background:var(--dark);
  padding:10px;
}

.filter-form button{
  background:linear-gradient(135deg, var(--primary), var(--secondary));
  color:white;
  border:none;
  border-radius:15px;
  padding:16px;
  font-size:1.1rem;
  font-weight:600;
  cursor:pointer;
  transition:all 0.3s ease;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  grid-column:span 2;
}

.filter-form button:hover{
  transform:translateY(-3px);
  box-shadow:0 15px 30px rgba(0,0,0,0.3);
}

.filter-form select:focus{
  outline:none;
  border-color:var(--secondary);
  box-shadow:0 0 0 3px rgba(34,211,238,0.2);
  background:rgba(255,255,255,0.1);
}

/* ================= MATERIALS TABLE ================= */
.table-container{
  overflow-x:auto;
  border-radius:20px;
  border:1px solid rgba(255,255,255,0.1);
  background:rgba(255,255,255,0.05);
}

.materials-table{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  color:white;
}

.materials-table thead{
  background:linear-gradient(135deg, rgba(99,102,241,0.3), rgba(34,211,238,0.3));
}

.materials-table th{
  padding:20px;
  text-align:left;
  font-weight:600;
  font-size:1.1rem;
  border-bottom:2px solid rgba(255,255,255,0.1);
}

.materials-table td{
  padding:20px;
  border-bottom:1px solid rgba(255,255,255,0.05);
  transition:background 0.3s ease;
}

.materials-table tbody tr:hover{
  background:rgba(255,255,255,0.08);
}

.materials-table tbody tr:last-child td{
  border-bottom:none;
}

/* Table Badges */
.table-badge{
  padding:6px 12px;
  border-radius:20px;
  font-size:0.85rem;
  font-weight:500;
  display:inline-block;
  margin:2px;
}

.branch-badge{background:rgba(99,102,241,0.3);color:#c7d2fe;}
.sem-badge{background:rgba(34,211,238,0.3);color:#a5f3fc;}
.subject-badge{background:rgba(244,114,182,0.3);color:#fbcfe8;}

/* Action Buttons */
.action-buttons{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}

.action-btn{
  padding:10px 18px;
  border-radius:12px;
  font-weight:500;
  text-decoration:none;
  transition:all 0.3s ease;
  display:inline-flex;
  align-items:center;
  gap:8px;
  font-size:0.9rem;
}

.download-btn{
  background:linear-gradient(135deg, #10b981, #34d399);
  color:white;
}

.view-btn{
  background:linear-gradient(135deg, #3b82f6, #60a5fa);
  color:white;
}

.watch-btn{
  background:linear-gradient(135deg, #ef4444, #f87171);
  color:white;
}

.action-btn:hover{
  transform:translateY(-3px);
  box-shadow:0 8px 20px rgba(0,0,0,0.3);
}

.no-lecture{
  color:rgba(255,255,255,0.5);
  font-style:italic;
  font-size:0.9rem;
}

/* ================= STATS PANEL ================= */
.stats-panel{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:20px;
  margin:40px 0;
}

.stat-card{
  background:rgba(255,255,255,0.07);
  padding:25px;
  border-radius:20px;
  text-align:center;
  border:1px solid rgba(255,255,255,0.1);
  transition:all 0.3s ease;
}

.stat-card:hover{
  background:rgba(255,255,255,0.1);
  transform:translateY(-5px);
}

.stat-card i{
  font-size:2.5rem;
  margin-bottom:15px;
  color:var(--secondary);
}

.stat-card h3{
  font-size:1.8rem;
  margin-bottom:10px;
  color:white;
}

.stat-card p{
  color:rgba(255,255,255,0.7);
  font-size:0.9rem;
}

/* ================= FOOTER ================= */
footer{
  text-align:center;
  padding:40px;
  color:rgba(255,255,255,0.6);
  margin-top:60px;
  border-top:1px solid rgba(255,255,255,0.1);
  background:rgba(0,0,0,0.2);
}

/* ================= MOBILE RESPONSIVE ================= */
@media(max-width:768px){
  .navbar{
    flex-direction:column;
    gap:20px;
    padding:20px;
  }
  
  .navbar ul{
    flex-wrap:wrap;
    justify-content:center;
    gap:10px;
  }
  
  .section-page{
    margin:30px 15px;
    padding:30px 20px;
  }
  
  .section-page h2{
    font-size:2rem;
  }
  
  .filter-form{
    grid-template-columns:1fr;
  }
  
  .filter-form button{
    grid-column:span 1;
  }
  
  .materials-table{
    font-size:0.9rem;
  }
  
  .materials-table th,
  .materials-table td{
    padding:12px 8px;
  }
  
  .action-buttons{
    flex-direction:column;
    gap:8px;
  }
  
  .social-bar{
    position:fixed;
    bottom:20px;
    top:auto;
    right:50%;
    transform:translateX(50%);
    flex-direction:row;
  }
  
  .stats-panel{
    grid-template-columns:1fr;
  }
}
</style>
</head>
<body>

<!-- Animated Background -->
<div class="starfield" id="starfield"></div>
<div class="gradient-orbs">
  <div class="orb orb-1"></div>
  <div class="orb orb-2"></div>
  <div class="orb orb-3"></div>
</div>

<!-- Social Media Bar -->
<div class="social-bar">
  <a href="https://instagram.com/Ramesh__6162" target="_blank" class="social-btn instagram-btn">
    <i class="fab fa-instagram"></i>
    <span class="tooltip">@Ramesh__6162</span>
  </a>
  
  <a href="mailto:rameshprasadrp901@gmail.com" class="social-btn email-btn">
    <i class="fas fa-envelope"></i>
    <span class="tooltip">Email Ramesh</span>
  </a>
  
  <a href="https://github.com" target="_blank" class="social-btn github-btn">
    <i class="fab fa-github"></i>
    <span class="tooltip">GitHub</span>
  </a>
  
  <a href="https://wa.me/917498147593" target="_blank" class="social-btn whatsapp-btn">
    <i class="fab fa-whatsapp"></i>
    <span class="tooltip">WhatsApp</span>
  </a>
</div>

<!-- NAVBAR -->
<nav class="navbar">
  <div class="logo">
    <i class="fas fa-book-open logo-icon"></i>
    <span>Smart Library</span>
  </div>
  <ul>
    <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
    <li><a href="library.html" class="active"><i class="fas fa-book"></i> Library</a></li>
    <li><a href="lectures.html"><i class="fas fa-play-circle"></i> Lectures</a></li>
    <li><a href="downloads.html"><i class="fas fa-download"></i> Downloads</a></li>
  </ul>
</nav>

<!-- LIBRARY SECTION -->
<div class="section-page">
  <h2><i class="fas fa-graduation-cap"></i> Digital Library</h2>
  
  <!-- Stats Panel -->
  <div class="stats-panel">
    <div class="stat-card">
      <i class="fas fa-file-pdf"></i>
      <h3 id="totalMaterials">0</h3>
      <p>Study Materials</p>
    </div>
    <div class="stat-card">
      <i class="fas fa-download"></i>
      <h3 id="totalDownloads">0</h3>
      <p>Total Downloads</p>
    </div>
    <div class="stat-card">
      <i class="fas fa-video"></i>
      <h3 id="videoLectures">0</h3>
      <p>Video Lectures</p>
    </div>
    <div class="stat-card">
      <i class="fas fa-users"></i>
      <h3 id="activeUsers">128</h3>
      <p>Active Students</p>
    </div>
  </div>

  <!-- Filter Form -->
  <div class="filter-form">
    <select id="branch">
      <option value="">All Branches</option>
      <option value="CSE">Computer Science</option>
      <option value="ECE">Electronics</option>
      <option value="ME">Mechanical</option>
      <option value="CE">Civil</option>
      <option value="EE">Electrical</option>
    </select>

    <select id="semester">
      <option value="">All Semesters</option>
      <option value="1">Semester 1</option>
      <option value="2">Semester 2</option>
      <option value="3">Semester 3</option>
      <option value="4">Semester 4</option>
      <option value="5">Semester 5</option>
      <option value="6">Semester 6</option>
    </select>

    <select id="subject">
      <option value="">All Subjects</option>
      <option value="DBMS">Database Management</option>
      <option value="AI">Artificial Intelligence</option>
      <option value="Maths">Mathematics</option>
      <option value="C">Programming in C</option>
      <option value="DS">Data Structures</option>
      <option value="OS">Operating Systems</option>
      <option value="CN">Computer Networks</option>
    </select>

    <select id="sort">
      <option value="desc">Newest First</option>
      <option value="asc">Oldest First</option>
      <option value="popular">Most Downloaded</option>
    </select>

    <button onclick="filterMaterials()">
      <i class="fas fa-search"></i> Search Materials
    </button>
  </div>

  <!-- Materials Table -->
  <div class="table-container">
    <table class="materials-table">
      <thead>
        <tr>
          <th>Subject & Details</th>
          <th>Study Materials</th>
          <th>Video Lectures</th>
        </tr>
      </thead>
      <tbody id="materialTable">
        <!-- Materials will be populated here -->
      </tbody>
    </table>
  </div>
</div>

<footer>
  <p><i class="fas fa-copyright"></i> 2025 Smart Classroom Digital Library | Empowering Education Through Technology</p>
  <p style="margin-top:10px;font-size:0.9rem;">
    <i class="fas fa-envelope"></i> rameshprasadrp123@gmail.com | 
    <i class="fas fa-phone"></i> +91 7498147593 |
    <i class="fab fa-instagram"></i> @Ramesh__6162
  </p>
</footer>

<script>
// ================= STARFIELD GENERATOR =================
function createStarfield() {
  const starfield = document.getElementById('starfield');
  const starCount = 120;
  
  for(let i = 0; i < starCount; i++) {
    const star = document.createElement('div');
    const size = Math.random() * 3 + 1;
    const posX = Math.random() * 100;
    const posY = Math.random() * 100;
    const duration = Math.random() * 5 + 3;
    const delay = Math.random() * 5;
    
    star.classList.add('star');
    if(size < 1.5) star.classList.add('small');
    else if(size < 2.5) star.classList.add('medium');
    else star.classList.add('large');
    
    star.style.width = `${size}px`;
    star.style.height = `${size}px`;
    star.style.left = `${posX}%`;
    star.style.top = `${posY}%`;
    star.style.animationDuration = `${duration}s`;
    star.style.animationDelay = `${delay}s`;
    star.style.opacity = Math.random() * 0.7 + 0.3;
    
    starfield.appendChild(star);
  }
}

// ================= MATERIALS DATA =================
const materials = [
  {
    subject: "DBMS",
    title: "Database Management Systems",
    branch: "CSE",
    semester: "3",
    file: "uploads/dbms-notes.pdf",
    video: "https://www.youtube.com/watch?v=HXV3zeQKqGY",
    date: "2024-01-01",
    downloads: 145,
    size: "2.4 MB",
    pages: 48
  },
  {
    subject: "AI",
    title: "Artificial Intelligence Fundamentals",
    branch: "CSE",
    semester: "5",
    file: "uploads/ai-notes.pdf",
    video: "https://www.youtube.com/watch?v=JMUxmLyrhSk",
    date: "2024-02-10",
    downloads: 89,
    size: "3.1 MB",
    pages: 56
  },
  {
    subject: "Maths",
    title: "Engineering Mathematics - I",
    branch: "ECE",
    semester: "1",
    file: "uploads/maths-notes.pdf",
    video: "https://www.youtube.com/watch?v=Kp2bYWRQylk",
    date: "2023-12-01",
    downloads: 210,
    size: "1.8 MB",
    pages: 42
  },
  {
    subject: "C",
    title: "Programming in C Language",
    branch: "CSE",
    semester: "1",
    file: "uploads/c-programming.pdf",
    video: "https://www.youtube.com/watch?v=KJgsSFOSQv0",
    date: "2024-03-15",
    downloads: 312,
    size: "2.9 MB",
    pages: 64
  },
  {
    subject: "DS",
    title: "Data Structures & Algorithms",
    branch: "CSE",
    semester: "3",
    file: "uploads/dsa-notes.pdf",
    video: "https://www.youtube.com/watch?v=RBSGKlAvoiM",
    date: "2024-02-28",
    downloads: 178,
    size: "4.2 MB",
    pages: 72
  },
  {
    subject: "OS",
    title: "Operating Systems Concepts",
    branch: "CSE",
    semester: "4",
    file: "uploads/os-notes.pdf",
    video: "https://www.youtube.com/watch?v=vBURTt97EkA",
    date: "2024-01-20",
    downloads: 124,
    size: "3.5 MB",
    pages: 58
  },
  {
    subject: "CN",
    title: "Computer Networks",
    branch: "ECE",
    semester: "5",
    file: "uploads/cn-notes.pdf",
    video: "https://www.youtube.com/watch?v=3QhU9jd03a0",
    date: "2024-03-01",
    downloads: 96,
    size: "2.7 MB",
    pages: 52
  }
];

// ================= FILTER FUNCTION =================
function filterMaterials(){
  const branch = document.getElementById("branch").value;
  const semester = document.getElementById("semester").value;
  const subject = document.getElementById("subject").value;
  const sort = document.getElementById("sort").value;
  const table = document.getElementById("materialTable");
  
  let filtered = materials.filter(m =>
    (!branch || m.branch === branch) &&
    (!semester || m.semester === semester) &&
    (!subject || m.subject === subject)
  );

  // Sort based on selected option
  if(sort === "desc"){
    filtered.sort((a, b) => new Date(b.date) - new Date(a.date));
  }else if(sort === "asc"){
    filtered.sort((a, b) => new Date(a.date) - new Date(b.date));
  }else if(sort === "popular"){
    filtered.sort((a, b) => b.downloads - a.downloads);
  }

  table.innerHTML = "";

  if(filtered.length === 0){
    table.innerHTML = `
      <tr>
        <td colspan="3" style="text-align:center;padding:60px;">
          <i class="fas fa-search" style="font-size:3rem;opacity:0.3;margin-bottom:20px;"></i>
          <p style="font-size:1.1rem;color:rgba(255,255,255,0.5);">
            No materials found for your selection. Try different filters!
          </p>
        </td>
      </tr>
    `;
    return;
  }

  filtered.forEach(m => {
    table.innerHTML += `
      <tr>
        <td>
          <strong style="font-size:1.1rem;">${m.title}</strong>
          <div style="margin-top:10px;">
            <span class="table-badge branch-badge"><i class="fas fa-code-branch"></i> ${m.branch}</span>
            <span class="table-badge sem-badge"><i class="fas fa-graduation-cap"></i> Sem ${m.semester}</span>
            <span class="table-badge subject-badge"><i class="fas fa-book"></i> ${m.subject}</span>
          </div>
          <div style="margin-top:10px;font-size:0.85rem;color:rgba(255,255,255,0.6);">
            <span><i class="far fa-calendar"></i> ${new Date(m.date).toLocaleDateString()}</span> â€¢ 
            <span><i class="fas fa-file-alt"></i> ${m.pages} pages</span> â€¢ 
            <span><i class="fas fa-download"></i> ${m.downloads} downloads</span>
          </div>
        </td>
        <td>
          <div class="action-buttons">
            <a href="${m.file}" download onclick="trackDownload('${m.file}', '${m.title}')" class="action-btn download-btn">
              <i class="fas fa-download"></i> Download (${m.size})
            </a>
            <a href="${m.file}" target="_blank" class="action-btn view-btn">
              <i class="fas fa-eye"></i> View Online
            </a>
          </div>
        </td>
        <td>
          ${m.video ? 
            `<a href="${m.video}" target="_blank" class="action-btn watch-btn">
              <i class="fas fa-play-circle"></i> Watch Lecture
            </a>` : 
            `<span class="no-lecture"><i class="fas fa-video-slash"></i> No video available</span>`
          }
        </td>
      </tr>
    `;
  });
  
  updateStats(filtered);
}

// ================= STATS UPDATE =================
function updateStats(filteredMaterials){
  const totalMaterials = document.getElementById('totalMaterials');
  const totalDownloads = document.getElementById('totalDownloads');
  const videoLectures = document.getElementById('videoLectures');
  
  totalMaterials.textContent = filteredMaterials.length;
  
  const totalDls = filteredMaterials.reduce((sum, m) => sum + m.downloads, 0);
  totalDownloads.textContent = totalDls;
  
  const videos = filteredMaterials.filter(m => m.video).length;
  videoLectures.textContent = videos;
}

// ================= DOWNLOAD TRACKING =================
function trackDownload(file, title){
  let downloads = JSON.parse(localStorage.getItem("libraryDownloads")) || [];
  const downloadRecord = {
    file: file,
    title: title,
    date: new Date().toISOString(),
    timestamp: Date.now()
  };
  
  downloads.push(downloadRecord);
  localStorage.setItem("libraryDownloads", JSON.stringify(downloads));
  
  // Update download count in UI
  alert(`âœ… Download started: ${title}\nYour download has been tracked.`);
  
  // Find and update the material's download count
  const material = materials.find(m => m.file === file);
  if(material){
    material.downloads++;
    filterMaterials(); // Refresh to show updated count
  }
}

// ================= SOCIAL BUTTON TOOLTIPS =================
function initTooltips() {
  const socialBtns = document.querySelectorAll('.social-btn');
  socialBtns.forEach(btn => {
    btn.addEventListener('mouseenter', function() {
      const tooltip = this.querySelector('.tooltip');
      if(tooltip) tooltip.style.opacity = '1';
    });
    
    btn.addEventListener('mouseleave', function() {
      const tooltip = this.querySelector('.tooltip');
      if(tooltip) tooltip.style.opacity = '0';
    });
  });
}

// ================= INITIALIZE ON LOAD =================
document.addEventListener('DOMContentLoaded', function() {
  createStarfield();
  initTooltips();
  filterMaterials(); // Show all materials initially
  
  // Auto-filter on filter change
  document.querySelectorAll('select').forEach(select => {
    select.addEventListener('change', filterMaterials);
  });
  
  // Add animation to search button
  const searchBtn = document.querySelector('.filter-form button');
  searchBtn.addEventListener('click', function() {
    this.style.transform = 'scale(0.95)';
    setTimeout(() => {
      this.style.transform = '';
    }, 200);
  });
  
  // Load initial stats
  const downloadHistory = JSON.parse(localStorage.getItem("libraryDownloads")) || [];
  document.getElementById('activeUsers').textContent = Math.floor(128 + (downloadHistory.length / 10));
});
</script>
</body>
</html>
